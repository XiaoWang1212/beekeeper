(function(){"use strict";var e={8305:function(e,t,a){var s=a(3751),i=a(641);function n(e,t){const a=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.Wv)(a)}var o=a(6262);const l={},r=(0,o.A)(l,[["render",n]]);var c=r,h=a(5220),m=a(33),d=a.p+"img/honeybee.e7e31192.png";const g={class:"login-container"},u={class:"login-card"},v={class:"form-group"},k={key:0,class:"message"},p=["disabled"],f={key:1,class:"continue-game"};function b(e,t,a,n,o,l){return(0,i.uX)(),(0,i.CE)("div",g,[(0,i.Lk)("div",u,[t[4]||(t[4]=(0,i.Lk)("h1",null,"養蜂達人",-1)),t[5]||(t[5]=(0,i.Lk)("div",{class:"game-description"},[(0,i.Lk)("p",null,"歡迎來到養蜂達人！開始你的養蜂生涯吧！")],-1)),t[6]||(t[6]=(0,i.Lk)("div",{class:"bee-animation"},[(0,i.Lk)("img",{src:d,alt:"蜜蜂",class:"bee-icon"})],-1)),(0,i.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>l.startGame&&l.startGame(...e)),["prevent"])),class:"login-form"},[(0,i.Lk)("div",v,[t[3]||(t[3]=(0,i.Lk)("label",{for:"characterName"},"你的養蜂人名稱",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"characterName","onUpdate:modelValue":t[0]||(t[0]=e=>o.characterName=e),placeholder:"請輸入你的名稱",maxlength:"12",required:""},null,512),[[s.Jo,o.characterName]])]),o.message?((0,i.uX)(),(0,i.CE)("div",k,(0,m.v_)(o.message),1)):(0,i.Q3)("",!0),(0,i.Lk)("button",{type:"submit",class:"start-button",disabled:!l.canStart}," 開始遊戲 ",8,p),o.hasSavedGame?((0,i.uX)(),(0,i.CE)("div",f,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.continueGame&&l.continueGame(...e)),class:"continue-button"}," 繼續遊戲 ")])):(0,i.Q3)("",!0)],32),t[7]||(t[7]=(0,i.Lk)("div",{class:"game-features"},[(0,i.Lk)("h3",null,"遊戲特色"),(0,i.Lk)("ul",null,[(0,i.Lk)("li",null,"🐝 建立你自己的蜂場"),(0,i.Lk)("li",null,"🌼 派遣蜜蜂採集各種花蜜"),(0,i.Lk)("li",null,"🏆 升級你的蜂巢，增加產量"),(0,i.Lk)("li",null,"⚡ 應對各種自然挑戰和病蟲害")])],-1))])])}a(4114);var S={name:"LoginView",data(){return{characterName:"",message:"",hasSavedGame:!1}},computed:{canStart(){return this.characterName.trim().length>=2}},mounted(){this.checkSavedGame(),this.$route.query.error&&(this.message=decodeURIComponent(this.$route.query.error),this.$router.replace({path:this.$route.path}))},methods:{startGame(){this.canStart&&(localStorage.setItem("beekeeper_name",this.characterName),localStorage.setItem("beekeeper_new_game","true"),this.$router.push("/game"))},continueGame(){localStorage.removeItem("beekeeper_new_game"),this.$router.push("/game")},checkSavedGame(){const e=localStorage.getItem("beekeeper_game");if(this.hasSavedGame=!!e,this.hasSavedGame){const e=localStorage.getItem("beekeeper_name");e&&(this.characterName=e)}}}};const y=(0,o.A)(S,[["render",b],["__scopeId","data-v-294539d2"]]);var L=y,C=a.p+"img/honeyTotal.35c15db3.png",M=a.p+"img/coin.b872a83c.png";const w={class:"game-container"},A={class:"weather-display"},T={id:"weather-icon"},_={id:"weather-status"},H={class:"resources-panel"},x={class:"resource"},N={class:"resource-info"},F={class:"resource"},$={class:"resource-info"},E={class:"resource"},I={class:"resource-info"},D={class:"hive-display"},B={class:"hive-container",ref:"hiveContainer"},P={class:"hive-stats"},G={class:"action-panel"},W=["disabled"],X=["disabled"],U=["disabled"],O={class:"challenges-panel"},q={class:"challenge-actions"},R=["onClick"],j={class:"education-panel"};function Q(e,t,a,n,o,l){const r=(0,i.g2)("foraging-modal"),c=(0,i.g2)("labor-task-modal");return(0,i.uX)(),(0,i.CE)("div",w,[(0,i.Lk)("header",null,[t[6]||(t[6]=(0,i.Lk)("h1",null,"養蜂達人",-1)),(0,i.Lk)("div",A,[(0,i.Lk)("span",T,(0,m.v_)(o.weatherTypes[o.gameState.weather.current].icon),1),(0,i.Lk)("span",_,(0,m.v_)(o.weatherTypes[o.gameState.weather.current].name),1)])]),(0,i.Lk)("div",H,[(0,i.Lk)("div",x,[t[8]||(t[8]=(0,i.Lk)("img",{src:d,alt:"蜜蜂",class:"resource-icon"},null,-1)),(0,i.Lk)("div",N,[t[7]||(t[7]=(0,i.Lk)("span",{class:"resource-name"},"蜜蜂",-1)),(0,i.Lk)("span",null,(0,m.v_)(o.gameState.bees),1)])]),(0,i.Lk)("div",F,[t[10]||(t[10]=(0,i.Lk)("img",{src:C,alt:"蜂蜜",class:"resource-icon"},null,-1)),(0,i.Lk)("div",$,[t[9]||(t[9]=(0,i.Lk)("span",{class:"resource-name"},"蜂蜜 (kg)",-1)),(0,i.Lk)("span",null,(0,m.v_)(o.gameState.honey.toFixed(1)),1)])]),(0,i.Lk)("div",E,[t[12]||(t[12]=(0,i.Lk)("img",{src:M,alt:"金錢",class:"resource-icon"},null,-1)),(0,i.Lk)("div",I,[t[11]||(t[11]=(0,i.Lk)("span",{class:"resource-name"},"金錢",-1)),(0,i.Lk)("span",null,(0,m.v_)(o.gameState.money),1)])])]),(0,i.Lk)("div",D,[t[17]||(t[17]=(0,i.Lk)("h2",null,"蜂巢狀況",-1)),(0,i.Lk)("div",B,null,512),(0,i.Lk)("div",P,[(0,i.Lk)("div",null,[t[13]||(t[13]=(0,i.eW)(" 健康度: ")),(0,i.Lk)("span",{style:(0,m.Tr)(l.healthColorStyle)},(0,m.v_)(o.gameState.hiveHealth)+"%",5)]),(0,i.Lk)("div",null,[t[14]||(t[14]=(0,i.eW)(" 等級: ")),(0,i.Lk)("span",null,(0,m.v_)(o.gameState.hiveLevel),1)]),(0,i.Lk)("div",null,[t[15]||(t[15]=(0,i.eW)(" 產蜜效率: ")),(0,i.Lk)("span",null,(0,m.v_)(o.gameState.honeyPerBeePerMinute.toFixed(2))+" kg/分鐘/蜂",1)]),(0,i.Lk)("div",null,[t[16]||(t[16]=(0,i.eW)(" 蜂箱容量: ")),(0,i.Lk)("span",null,(0,m.v_)(o.gameState.hiveCapacity)+" 隻",1)])])]),(0,i.Lk)("div",G,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.collectHoney&&l.collectHoney(...e)),disabled:o.gameState.honey<=0,class:"game-button"}," 採集蜂蜜 ",8,W),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.buyBee&&l.buyBee(...e)),disabled:o.gameState.money<o.gameState.costs.bee||o.gameState.bees>=o.gameState.hiveCapacity,class:"game-button"}," 購買蜜蜂 (¥"+(0,m.v_)(o.gameState.costs.bee)+") ",9,X),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.upgradeHive&&l.upgradeHive(...e)),disabled:o.gameState.money<o.gameState.costs.hiveUpgrade,class:"game-button"}," 升級蜂巢 (¥"+(0,m.v_)(o.gameState.costs.hiveUpgrade)+") ",9,U),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.checkHive&&l.checkHive(...e)),class:"game-button"},"檢查蜂巢"),(0,i.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>l.openForagingModal&&l.openForagingModal(...e)),class:"game-button special"}," 採蜜任務 ")]),(0,i.Lk)("div",O,[t[18]||(t[18]=(0,i.Lk)("h2",null,"養蜂挑戰",-1)),o.gameState.currentChallenge?(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,m.C4)(["challenge-card",o.gameState.currentChallenge?.type])},[(0,i.Lk)("h3",null,(0,m.v_)(o.gameState.currentChallenge.data.title),1),(0,i.Lk)("p",null,(0,m.v_)(o.gameState.currentChallenge.data.description),1),(0,i.Lk)("div",q,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.gameState.currentChallenge.data.solutions,((e,t)=>((0,i.uX)(),(0,i.CE)("button",{key:t,onClick:t=>l.applySolution(e),class:"challenge-button"},(0,m.v_)(e.name),9,R)))),128))])],2)),[[s.aG,!o.challengeHidden]]):(0,i.Q3)("",!0)]),t[20]||(t[20]=(0,i.Lk)("div",{class:"notification-area"},null,-1)),(0,i.Lk)("div",j,[t[19]||(t[19]=(0,i.Lk)("h2",null,"今日養蜂知識",-1)),(0,i.Lk)("p",null,(0,m.v_)(o.currentBeeFact),1)]),(0,i.Lk)("div",{id:"modal-overlay",class:(0,m.C4)(["modal-overlay",{active:o.isModalActive,hidden:!o.isModalActive}]),onClick:t[5]||(t[5]=(...e)=>l.closeAllModals&&l.closeAllModals(...e))},null,2),(0,i.bF)(r,{"game-state":o.gameState,"is-active":o.isForagingModalActive,onCloseModal:l.closeForagingModal,onStartMission:l.startForagingMission,onSellAllHoney:l.sellAllHoney,onUpdateSelectedArea:l.updateSelectedArea},null,8,["game-state","is-active","onCloseModal","onStartMission","onSellAllHoney","onUpdateSelectedArea"]),o.laborTask.isActive?((0,i.uX)(),(0,i.Wv)(c,{key:0,task:o.laborTask,onComplete:l.completeLaborTask},null,8,["task","onComplete"])):(0,i.Q3)("",!0)])}const K={class:"modal-header"},J={class:"modal-content"},V={class:"modal-tabs"},Y=["onClick"],z={class:"tab-content"},Z={class:"area-selection"},ee={class:"area-grid"},te=["data-area","onClick"],ae={key:0,class:"area-stats"},se={class:"area-stat"},ie={class:"yield"},ne={class:"area-stat"},oe={class:"area-stat"},le={class:"time"},re={key:1,class:"lock-icon"},ce={class:"mission-setup"},he={class:"mission-form"},me={class:"form-group"},de={class:"slider-container"},ge=["max"],ue={class:"form-group"},ve={class:"form-info"},ke=["disabled"],pe={class:"missions-container"},fe={key:0,class:"empty-missions"},be={class:"mission-header"},Se={class:"mission-title"},ye={class:"mission-area"},Le={class:"mission-timer"},Ce={class:"mission-details"},Me={class:"mission-progress"},we={class:"honey-types"},Ae={class:"honey-info"};function Te(e,t,a,n,o,l){return(0,i.uX)(),(0,i.CE)("div",{class:(0,m.C4)(["modal",{active:a.isActive,hidden:!a.isActive}])},[(0,i.Lk)("div",K,[t[5]||(t[5]=(0,i.Lk)("h2",null,"採蜜任務中心",-1)),(0,i.Lk)("button",{class:"modal-close",onClick:t[0]||(t[0]=t=>e.$emit("close-modal"))},"×")]),(0,i.Lk)("div",J,[(0,i.Lk)("div",V,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.tabs,((e,t)=>((0,i.uX)(),(0,i.CE)("button",{key:t,class:(0,m.C4)(["tab-button",{active:o.activeTab===e.id}]),onClick:t=>o.activeTab=e.id},(0,m.v_)(e.name),11,Y)))),128))]),(0,i.Lk)("div",z,[(0,i.Lk)("div",{class:(0,m.C4)(["tab-pane",{active:"areas-tab"===o.activeTab}])},[(0,i.Lk)("div",Z,[t[9]||(t[9]=(0,i.Lk)("h3",null,"選擇採蜜區域",-1)),(0,i.Lk)("div",ee,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.areas,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:(0,m.C4)(["area-card",{locked:e.locked,selected:o.selectedArea===e.id}]),"data-area":e.id,onClick:t=>l.selectArea(e)},[(0,i.Lk)("div",{class:(0,m.C4)(["area-image",e.id])},null,2),(0,i.Lk)("h4",null,(0,m.v_)(e.name),1),(0,i.Lk)("p",null,(0,m.v_)(e.description),1),e.locked?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ae,[(0,i.Lk)("span",se,[t[6]||(t[6]=(0,i.eW)("收益：")),(0,i.Lk)("span",ie,(0,m.v_)(e.yield),1)]),(0,i.Lk)("span",ne,[t[7]||(t[7]=(0,i.eW)("風險：")),(0,i.Lk)("span",{class:(0,m.C4)(["risk",e.riskLevel])},(0,m.v_)(e.risk),3)]),(0,i.Lk)("span",oe,[t[8]||(t[8]=(0,i.eW)("時間：")),(0,i.Lk)("span",le,(0,m.v_)(e.time),1)])])),e.locked?((0,i.uX)(),(0,i.CE)("div",re,"🔒")):(0,i.Q3)("",!0)],10,te)))),128))])]),(0,i.Lk)("div",ce,[t[16]||(t[16]=(0,i.Lk)("h3",null,"派遣採蜜隊伍",-1)),(0,i.Lk)("div",he,[(0,i.Lk)("div",me,[t[11]||(t[11]=(0,i.Lk)("label",{for:"bees-assigned"},"指派蜜蜂數量：",-1)),(0,i.Lk)("div",de,[(0,i.bo)((0,i.Lk)("input",{type:"range",id:"bees-assigned",min:1,max:l.maxBeesAssignable,"onUpdate:modelValue":t[1]||(t[1]=e=>o.beesAssigned=e),class:"slider"},null,8,ge),[[s.Jo,o.beesAssigned]]),(0,i.Lk)("span",null,(0,m.v_)(o.beesAssigned),1),t[10]||(t[10]=(0,i.eW)(" 隻 "))])]),(0,i.Lk)("div",ue,[t[13]||(t[13]=(0,i.Lk)("label",{for:"mission-duration"},"採集時間：",-1)),(0,i.bo)((0,i.Lk)("select",{id:"mission-duration","onUpdate:modelValue":t[2]||(t[2]=e=>o.missionDuration=e)},t[12]||(t[12]=[(0,i.Lk)("option",{value:"short"},"短程(30秒)",-1),(0,i.Lk)("option",{value:"medium"},"中程(60秒)",-1),(0,i.Lk)("option",{value:"long"},"長程(120秒)",-1)]),512),[[s.u1,o.missionDuration]])]),(0,i.Lk)("div",ve,[(0,i.Lk)("div",null,[t[14]||(t[14]=(0,i.eW)("預計收穫：")),(0,i.Lk)("span",null,(0,m.v_)(l.expectedYield),1)]),(0,i.Lk)("div",null,[t[15]||(t[15]=(0,i.eW)("風險評估：")),(0,i.Lk)("span",null,(0,m.v_)(l.missionRisk),1)])]),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.startMission&&l.startMission(...e)),class:"game-button mission-button",disabled:!l.canStartMission}," 開始採蜜任務 ",8,ke)])])],2),(0,i.Lk)("div",{class:(0,m.C4)(["tab-pane",{active:"missions-tab"===o.activeTab}])},[t[17]||(t[17]=(0,i.Lk)("h3",null,"進行中的任務",-1)),(0,i.Lk)("div",pe,[0===a.gameState.foraging.activeMissions.length?((0,i.uX)(),(0,i.CE)("div",fe," 目前沒有進行中的採蜜任務 ")):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.gameState.foraging.activeMissions,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"mission-card"},[(0,i.Lk)("div",be,[(0,i.Lk)("div",null,[(0,i.Lk)("div",Se,"採蜜任務 #"+(0,m.v_)(t+1),1),(0,i.Lk)("div",ye,(0,m.v_)(l.getAreaName(e.area)),1)]),(0,i.Lk)("div",Le,(0,m.v_)(l.formatTime(e.timeRemaining)),1)]),(0,i.Lk)("div",Ce,[(0,i.Lk)("div",null,"指派蜜蜂："+(0,m.v_)(e.bees)+" 隻",1),(0,i.Lk)("div",null,"風險等級："+(0,m.v_)(e.risk),1)]),(0,i.Lk)("div",Me,[(0,i.Lk)("div",{class:"progress-bar",style:(0,m.Tr)({width:e.progress+"%"})},null,4)])])))),128))])],2),(0,i.Lk)("div",{class:(0,m.C4)(["tab-pane",{active:"honey-tab"===o.activeTab}])},[t[22]||(t[22]=(0,i.Lk)("h3",null,"採集到的花蜜",-1)),(0,i.Lk)("div",we,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.honeyTypes,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"honey-type"},[(0,i.Lk)("div",{class:(0,m.C4)(["honey-image",e.id])},null,2),(0,i.Lk)("div",Ae,[(0,i.Lk)("h4",null,(0,m.v_)(e.name),1),(0,i.Lk)("div",null,[t[18]||(t[18]=(0,i.eW)("數量: ")),(0,i.Lk)("span",null,(0,m.v_)(l.getHoneyAmount(e.id)),1),t[19]||(t[19]=(0,i.eW)(" kg"))]),(0,i.Lk)("div",null,[t[20]||(t[20]=(0,i.eW)("市價: ")),(0,i.Lk)("span",null,(0,m.v_)(e.price),1),t[21]||(t[21]=(0,i.eW)(" 元/kg"))])])])))),128))]),(0,i.Lk)("button",{onClick:t[4]||(t[4]=t=>e.$emit("sell-all-honey")),class:"game-button"}," 出售所有花蜜 ")],2)])])],2)}a(8111),a(116),a(7588);var _e={name:"ForagingModal",props:{gameState:{type:Object,required:!0},isActive:{type:Boolean,default:!1}},data(){return{activeTab:"areas-tab",beesAssigned:1,missionDuration:"short",selectedArea:null,tabs:[{id:"areas-tab",name:"採蜜區域"},{id:"missions-tab",name:"進行中任務"},{id:"honey-tab",name:"花蜜收集"}],areas:[{id:"meadow",name:"花草草地",description:"常見花蜜，安全性高",yield:"普通",risk:"低",riskLevel:"low",time:"短",locked:!1},{id:"forest",name:"深林山谷",description:"野花蜜源，品質較佳",yield:"良好",risk:"中",riskLevel:"medium",time:"中",locked:!1},{id:"mountain",name:"高山草原",description:"高海拔蜜源，稀有花種",yield:"優質",risk:"高",riskLevel:"high",time:"長",locked:!1},{id:"orchard",name:"果園花區",description:"需達到蜂巢3級解鎖",locked:!0,minLevel:3},{id:"rare",name:"稀有花園",description:"需達到蜂巢5級解鎖",locked:!0,minLevel:5}],honeyTypes:[{id:"common",name:"普通花蜜",price:10},{id:"wildflower",name:"野花蜜",price:15},{id:"mountain",name:"高山花蜜",price:25},{id:"rare",name:"稀有花蜜",price:50}]}},computed:{maxBeesAssignable(){return Math.min(5,this.gameState.bees)},expectedYield(){if(!this.selectedArea)return"請選擇區域";const e=this.areas.find((e=>e.id===this.selectedArea));let t="";switch(e.id){case"meadow":t=this.beesAssigned<=2?"少量普通花蜜":"中量普通花蜜";break;case"forest":t=this.beesAssigned<=2?"少量野花蜜":"中量野花蜜";break;case"mountain":t=this.beesAssigned<=2?"少量高山花蜜":"中量高山花蜜";break;default:t="少量普通花蜜"}return"medium"===this.missionDuration?t=t.replace("少量","中量").replace("中量","大量"):"long"===this.missionDuration&&(t=t.replace("少量","大量").replace("中量","豐富")),t},missionRisk(){if(!this.selectedArea)return"未知";const e=this.areas.find((e=>e.id===this.selectedArea));let t="";switch(e.riskLevel){case"low":t=this.beesAssigned<=2?"極低":"低";break;case"medium":t=this.beesAssigned<=2?"低":"中";break;case"high":t=this.beesAssigned<=2?"中":"高";break;default:t="未知"}return"medium"===this.missionDuration?"極低"===t?t="低":"低"===t?t="中":"中"===t&&(t="高"):"long"===this.missionDuration&&("極低"===t?t="中":"低"===t?t="高":"中"===t&&(t="極高")),t},canStartMission(){return this.selectedArea&&this.beesAssigned>0&&this.beesAssigned<=this.gameState.bees}},mounted(){this.checkAndUnlockAreas(),this.selectedArea=this.gameState.foraging.selectedArea},watch:{"gameState.foraging.selectedArea"(e){this.selectedArea=e}},methods:{selectArea(e){e.locked||(this.selectedArea=e.id,this.$emit("update-selected-area",e.id))},startMission(){if(!this.canStartMission)return;const e={area:this.selectedArea,bees:parseInt(this.beesAssigned),duration:this.missionDuration,risk:this.missionRisk};this.$emit("start-mission",e)},checkAndUnlockAreas(){this.areas.forEach((e=>{e.minLevel&&this.gameState.hiveLevel>=e.minLevel&&(e.locked=!1)}))},getAreaName(e){const t=this.areas.find((t=>t.id===e));return t?t.name:"未知區域"},formatTime(e){if(!e&&0!==e)return"--:--";const t=Math.floor(e/60),a=Math.floor(e%60);return`${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},getHoneyAmount(e){return this.gameState&&this.gameState.foraging&&this.gameState.foraging.honeyCollected&&void 0!==this.gameState.foraging.honeyCollected[e]?this.gameState.foraging.honeyCollected[e].toFixed(1):"0.0"}}};const He=(0,o.A)(_e,[["render",Te],["__scopeId","data-v-6c8ce45e"]]);var xe=He;const Ne={key:0,class:"labor-overlay"},Fe={class:"labor-task"},$e={class:"progress-container"},Ee=["disabled"];function Ie(e,t,a,s,n,o){return a.task.isActive?((0,i.uX)(),(0,i.CE)("div",Ne,[(0,i.Lk)("div",Fe,[(0,i.Lk)("h3",null,(0,m.v_)(a.task.name),1),(0,i.Lk)("div",$e,[(0,i.Lk)("div",{class:"progress-bar",style:(0,m.Tr)({width:o.progress+"%"})},null,4)]),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.performWork&&o.performWork(...e)),class:"game-button",disabled:n.isCompleted},(0,m.v_)(o.buttonText),9,Ee)])])):(0,i.Q3)("",!0)}var De={name:"LaborTaskModal",props:{task:{type:Object,required:!0}},data(){return{isCompleted:!1,localClicksDone:0}},computed:{progress(){return(this.localClicksDone+this.task.clicksDone)/this.task.clicksNeeded*100},buttonText(){return this.isCompleted?"完成！":`努力工作 (還需 ${this.task.clicksNeeded-this.task.clicksDone-this.localClicksDone} 次)`}},methods:{performWork(){this.isCompleted||(this.localClicksDone++,this.localClicksDone+this.task.clicksDone>=this.task.clicksNeeded?(this.isCompleted=!0,setTimeout((()=>{this.$emit("complete",this.localClicksDone)}),500)):this.$emit("update-progress",this.localClicksDone))}},watch:{task:{handler(){this.localClicksDone=0,this.isCompleted=!1},deep:!0}}};const Be=(0,o.A)(De,[["render",Ie],["__scopeId","data-v-17625847"]]);var Pe=Be,Ge={name:"App",components:{ForagingModal:xe,LaborTaskModal:Pe},data(){return{gameState:{bees:0,honey:0,money:100,hiveLevel:1,hiveHealth:100,hiveCapacity:10,honeyPerBeePerMinute:.1,gameTime:0,lastSaveTime:Date.now(),weather:{current:"sunny",effectMultiplier:1,daysRemaining:0},currentChallenge:null,totalHoneyCollected:0,challengesSolved:0,costs:{bee:50,hiveUpgrade:200},foraging:{activeMissions:[],selectedArea:null,beesAssigned:1,honeyCollected:{common:0,wildflower:0,mountain:0,rare:0}}},weatherTypes:{sunny:{icon:"☀️",name:"晴天",effect:1,description:"陽光充足，蜜蜂出勤率高"},rainy:{icon:"🌧️",name:"連續大雨",effect:.3,description:"雨天，蜜蜂難以飛行採蜜"},drought:{icon:"🏜️",name:"乾旱",effect:.5,description:"蜜源植物枯萎，花蜜減少"},cold:{icon:"❄️",name:"寒流來襲",effect:.2,description:"蜜蜂活動減緩，需要額外供暖"}},honeyMarketPrice:10,beeFacts:["一隻工蜂一生中只能生產約1茶匙的蜂蜜。","蜂后一天可以產下多達2000顆蛋，是自己體重兩倍的蛋量。","工蜂的壽命僅約為6週，但在冬季可以存活數月。","蜜蜂需要採集約2百萬朵花，才能製造出1公斤的蜂蜜。","蜜蜂是唯一會產生人類可以食用的昆蟲。","蜜蜂的飛行速度可達每小時24公里。","蜂巢內溫度恆定在35°C左右，冬季蜜蜂會聚集成團維持溫度。","一個健康的蜂群可有50,000到60,000隻蜜蜂。","蜜蜂透過「搖擺舞」告訴其他蜜蜂食物來源的方向與距離。","全球約75%的農作物在某種程度上依賴蜜蜂授粉。","現代養蜂人面臨的最大挑戰之一是「蜂群崩潰失調症」，造成大量蜜蜂神秘消失。","蜂蜜永遠不會變質，考古學家在古埃及古墓中發現的蜂蜜，數千年後仍可食用。"],currentBeeFact:"",isModalActive:!1,isForagingModalActive:!1,laborTask:{isActive:!1,name:"",clicksNeeded:0,clicksDone:0,onComplete:null},challengeHidden:!1,pestTypes:[],environmentalEvents:[],gameLoopInterval:null,saveGameInterval:null}},computed:{healthColorStyle(){return this.gameState.hiveHealth<30?{color:"#e53935"}:this.gameState.hiveHealth<60?{color:"#ff9800"}:{color:"#4caf50"}}},mounted(){this.initGame()},beforeUnmount(){clearInterval(this.gameLoopInterval),clearInterval(this.saveGameInterval)},methods:{initGame(){this.initPestTypes(),this.initEnvironmentalEvents(),this.loadGame(),this.gameLoopInterval=setInterval(this.gameLoop,1e3),this.saveGameInterval=setInterval(this.saveGame,3e4),setInterval(this.maybeStartChallenge,12e4),this.currentBeeFact=this.beeFacts[Math.floor(Math.random()*this.beeFacts.length)],setInterval(this.updateBeeFact,6e4),this.$nextTick((()=>{this.renderBees()})),this.showNotification("歡迎來到養蜂達人！開始經營你的第一個蜂場吧！","info"),setTimeout((()=>{this.changeWeather("rainy")}),1e4)},gameLoop(){this.gameState.gameTime++;let e=this.gameState.bees*this.gameState.honeyPerBeePerMinute*this.gameState.weather.effectMultiplier/60;this.gameState.honey+=e,this.gameState.totalHoneyCollected+=e,this.gameState.weather.daysRemaining>0&&(this.gameState.weather.daysRemaining--,0===this.gameState.weather.daysRemaining&&this.changeWeather("sunny")),this.gameState.hiveHealth<30&&this.gameState.bees>0&&Math.random()<.05&&(this.gameState.bees--,this.showNotification("蜂群健康狀況不佳，失去了1隻蜜蜂！","warning"),this.renderBees())},collectHoney(){this.gameState.honey<=0||this.startLaborTask("採集蜂蜜",5,(()=>{const e=Math.round(this.gameState.honey*this.honeyMarketPrice);this.gameState.money+=e,this.showNotification(`成功收穫了 ${this.gameState.honey.toFixed(1)}kg 蜂蜜，賣出獲得 ${e} 元！`,"success"),this.updateHoneyMarketPrice(),this.gameState.honey=0}))},buyBee(){this.gameState.money<this.gameState.costs.bee||this.gameState.bees>=this.gameState.hiveCapacity||(this.gameState.money-=this.gameState.costs.bee,this.gameState.bees+=1,this.showNotification("購買了1隻新蜜蜂！","success"),this.renderBees())},upgradeHive(){this.gameState.money<this.gameState.costs.hiveUpgrade||(this.gameState.money-=this.gameState.costs.hiveUpgrade,this.gameState.hiveLevel+=1,this.gameState.hiveCapacity+=5,this.gameState.honeyPerBeePerMinute+=.05,this.gameState.costs.hiveUpgrade=Math.floor(1.5*this.gameState.costs.hiveUpgrade),this.showNotification(`蜂巢升級到等級 ${this.gameState.hiveLevel}！容量和效率提升了`,"success"))},checkHive(){this.startLaborTask("檢查蜂巢",8,(()=>{if(this.gameState.hiveHealth=Math.min(100,this.gameState.hiveHealth+5),Math.random()<.3&&!this.gameState.currentChallenge){let e=!1;if(Math.random()<.5){let t=this.pestTypes[Math.floor(Math.random()*this.pestTypes.length)];this.startChallenge("pest",t),e=!0}e||this.showNotification("檢查完成，蜂巢狀況良好！","success")}else this.showNotification("檢查完成，蜂巢狀況良好！","success")}))},startForagingMission(e){console.log("Starting foraging mission:",e)},sellAllHoney(){console.log("Selling all honey")},updateSelectedArea(e){this.gameState.foraging.selectedArea=e},openForagingModal(){this.isModalActive=!0,this.isForagingModalActive=!0},closeForagingModal(){this.isForagingModalActive=!1,this.isModalActive=!1},closeAllModals(e){"modal-overlay"===e.target.id&&(this.isForagingModalActive=!1,this.isModalActive=!1)},startLaborTask(e,t,a){this.laborTask={isActive:!0,name:e,clicksNeeded:t,clicksDone:0,onComplete:a}},completeLaborTask(e){this.laborTask.clicksDone+=e,this.laborTask.isActive=!1,this.laborTask.onComplete&&this.laborTask.onComplete()},showNotification(e,t="info"){const a=document.querySelector(".notification-area"),s=document.createElement("div");s.className=`notification ${t}`,s.textContent=e,a.appendChild(s),setTimeout((()=>{s.style.animation="slideOut 0.3s forwards",setTimeout((()=>{s.remove()}),300)}),3e3)},changeWeather(e){this.gameState.weather.current=e,this.gameState.weather.effectMultiplier=this.weatherTypes[e].effect,this.gameState.weather.daysRemaining=Math.floor(5*Math.random())+3,"sunny"!==e&&this.startWeatherChallenge(e),this.showNotification(`天氣變化：${this.weatherTypes[e].name}！${this.weatherTypes[e].description}`,"info")},startWeatherChallenge(e){if(this.gameState.currentChallenge)return;let t={id:e,title:this.weatherTypes[e].name,description:`${this.weatherTypes[e].description}，蜂蜜產量降低到${100*this.weatherTypes[e].effect}%！`,solutions:[]};switch(e){case"rainy":t.solutions=[{name:"準備糖水餵食 (¥50)",cost:50,effectText:"蜜蜂獲得額外糖水，保持了活力",effect:()=>(this.gameState.money-=50,this.gameState.weather.effectMultiplier+=.2,!0)},{name:"等待天氣好轉",cost:0,effectText:"只能等待雨停...",effect:()=>!0}];break;case"drought":t.solutions=[{name:"遷移蜂箱 (¥100)",cost:100,effectText:"蜂箱遷移到有更多蜜源的地方",effect:()=>(this.gameState.money-=100,this.gameState.weather.effectMultiplier+=.3,!0)},{name:"自行種植蜜源植物 (¥70)",cost:70,effectText:"種植的花朵提供了部分蜜源",effect:()=>(this.gameState.money-=70,this.gameState.weather.effectMultiplier+=.2,!0)}];break;case"cold":t.solutions=[{name:"加固蜂箱保溫 (¥80)",cost:80,effectText:"蜂箱保溫效果提升，蜜蜂活動增加",effect:()=>(this.gameState.money-=80,this.gameState.weather.effectMultiplier+=.3,!0)},{name:"購買糖漿餵食 (¥60)",cost:60,effectText:"糖漿提供能量，幫助蜜蜂度過寒冷",effect:()=>(this.gameState.money-=60,this.gameState.weather.effectMultiplier+=.2,!0)}];break}this.startChallenge("weather",t)},maybeStartChallenge(){if(this.gameState.currentChallenge||Math.random()>.3)return;let e=["pest","environmental"],t=e[Math.floor(Math.random()*e.length)];if("pest"===t){let e=this.pestTypes[Math.floor(Math.random()*this.pestTypes.length)];this.startChallenge("pest",e)}else if("environmental"===t){let e=this.environmentalEvents[Math.floor(Math.random()*this.environmentalEvents.length)];this.startChallenge("environment",e)}},startChallenge(e,t){this.gameState.currentChallenge={type:e,data:t,startTime:Date.now()},this.challengeHidden=!1,this.showNotification(`警告：${t.title}！`,"warning"),setTimeout((()=>{this.gameState.currentChallenge&&this.gameState.currentChallenge.type===e&&this.gameState.currentChallenge.data.id===t.id&&(t.consequence&&t.consequence(),this.challengeHidden=!0,this.gameState.currentChallenge=null)}),12e4)},applySolution(e){if(e.cost>this.gameState.money)return void this.showNotification(`金錢不足！需要 ${e.cost} 元`,"warning");let t=e.effect();t&&(this.showNotification(e.effectText,"success"),this.gameState.challengesSolved++,this.challengeHidden=!0,this.gameState.currentChallenge=null)},updateHoneyMarketPrice(){let e=3*(Math.random()-.5);this.honeyMarketPrice=Math.min(13,Math.max(7,this.honeyMarketPrice+e)),this.showNotification(`蜂蜜市場價格更新：${this.honeyMarketPrice.toFixed(1)}元/kg`,"info")},renderBees(){const e=this.$refs.hiveContainer;if(e){while(e.firstChild)e.removeChild(e.firstChild);for(let t=0;t<this.gameState.bees;t++){const t=document.createElement("div");t.className="bee";let a=80*Math.random()+10,s=80*Math.random()+10;t.style.left=`${a}%`,t.style.top=`${s}%`,t.style.animationDelay=5*Math.random()+"s",e.appendChild(t)}}},updateBeeFact(){this.currentBeeFact=this.beeFacts[Math.floor(Math.random()*this.beeFacts.length)]},saveGame(){localStorage.setItem("beekeeperGame",JSON.stringify(this.gameState)),this.gameState.lastSaveTime=Date.now()},loadGame(){const e=localStorage.getItem("beekeeperGame");if(e)try{const t=JSON.parse(e);this.gameState.bees=t.bees||0,this.gameState.honey=t.honey||0,this.gameState.money=t.money||100,this.gameState.hiveLevel=t.hiveLevel||1,this.gameState.hiveHealth=t.hiveHealth||100,this.gameState.hiveCapacity=t.hiveCapacity||10,this.gameState.honeyPerBeePerMinute=t.honeyPerBeePerMinute||.1,this.gameState.totalHoneyCollected=t.totalHoneyCollected||0,this.gameState.challengesSolved=t.challengesSolved||0,this.gameState.costs=t.costs||{bee:50,hiveUpgrade:200};const a=Date.now(),s=(a-(t.lastSaveTime||a))/6e4;if(s>5){const e=this.gameState.bees*this.gameState.honeyPerBeePerMinute*s*.5;this.gameState.honey+=e,setTimeout((()=>{this.showNotification(`你離開了${Math.floor(s)}分鐘，蜜蜂在此期間產出了${e.toFixed(1)}kg蜂蜜！`,"success")}),1e3)}}catch(t){console.error("Error loading saved game",t)}},initPestTypes(){this.pestTypes=[{id:"mite",title:"蜂螨爆發",description:"蜂螨正在侵擾你的蜂群，可能導致蜜蜂生病或死亡！",severity:"high",solutions:[{name:"購買藥劑治療",cost:150,effectText:"蜂群已被治療，健康恢復中",effect:()=>(this.gameState.money-=150,this.gameState.hiveHealth=Math.min(100,this.gameState.hiveHealth+30),!0)},{name:"自然療法 (風險更高)",cost:50,effectText:"自然療法效果有限，蜂群仍有風險",effect:()=>{this.gameState.money-=50;let e=Math.random()>.4;return e?(this.gameState.hiveHealth=Math.min(100,this.gameState.hiveHealth+15),!0):(this.gameState.hiveHealth-=10,this.showNotification("自然療法失敗，蜂群健康度下降！","warning"),!1)}}],consequence:()=>{this.gameState.hiveHealth-=20,this.gameState.bees>0&&this.gameState.bees--,this.showNotification("蜂螨危機惡化！蜜蜂數量減少","danger"),this.renderBees()}},{id:"hornet",title:"胡蜂入侵",description:"一群胡蜂正在攻擊你的蜂巢，蜜蜂恐慌中！",severity:"medium",solutions:[{name:"設置胡蜂陷阱",cost:100,effectText:"陷阱成功捕獲胡蜂，威脅解除",effect:()=>(this.gameState.money-=100,!0)},{name:"手動驅趕 (需要勞力)",cost:0,effectText:"經過辛苦驅趕，胡蜂暫時離開了",effect:()=>(this.startLaborTask("驅趕胡蜂",10,(()=>!0)),!1)}],consequence:()=>{let e=Math.max(1,Math.floor(.2*this.gameState.bees));this.gameState.bees-=e,this.showNotification(`胡蜂攻擊造成${e}隻蜜蜂損失！`,"danger"),this.renderBees()}}]},initEnvironmentalEvents(){this.environmentalEvents=[{id:"pesticide",title:"周圍農田噴灑農藥",description:"鄰近農田正大量噴灑農藥，你的蜜蜂可能會中毒！",severity:"high",solutions:[{name:"緊急遷移蜂箱",cost:200,effectText:"蜂箱已遷移至安全地點，但過程中損失了一些蜂蜜",effect:()=>(this.gameState.money-=200,this.gameState.honey*=.7,!0)},{name:"關閉蜂箱入口 (暫停生產)",cost:0,effectText:"蜂箱入口已關閉，蜜蜂安全但無法生產",effect:()=>{const e=this.gameState.weather.effectMultiplier;return this.gameState.weather.effectMultiplier=0,this.showNotification("蜂箱入口關閉，產蜜暫停1分鐘","info"),setTimeout((()=>{this.gameState.weather.effectMultiplier=e,this.showNotification("蜂箱入口已重新開啟","info")}),6e4),!0}}],consequence:()=>{let e=Math.max(2,Math.floor(.3*this.gameState.bees));this.gameState.bees-=e,this.gameState.hiveHealth-=15,this.showNotification(`${e}隻蜜蜂因農藥中毒死亡！蜂群健康受損`,"danger"),this.renderBees()}}]}}};const We=(0,o.A)(Ge,[["render",Q]]);var Xe=We;const Ue=[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:L},{path:"/game",name:"game",component:Xe}],Oe=(0,h.aE)({history:(0,h.LA)("/beekeeper/"),routes:Ue});var qe=Oe,Re=a(6278),je=(0,Re.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,s.Ef)(c).use(je).use(qe).mount("#app")}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,n){if(!s){var o=1/0;for(h=0;h<e.length;h++){s=e[h][0],i=e[h][1],n=e[h][2];for(var l=!0,r=0;r<s.length;r++)(!1&n||o>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[r])}))?s.splice(r--,1):(l=!1,n<o&&(o=n));if(l){e.splice(h--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var h=e.length;h>0&&e[h-1][2]>n;h--)e[h]=e[h-1];e[h]=[s,i,n]}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.p="/beekeeper/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,n,o=s[0],l=s[1],r=s[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(r)var h=r(a)}for(t&&t(s);c<o.length;c++)n=o[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(h)},s=self["webpackChunkbeekeeper"]=self["webpackChunkbeekeeper"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(8305)}));s=a.O(s)})();
//# sourceMappingURL=app.6eaa3382.js.map